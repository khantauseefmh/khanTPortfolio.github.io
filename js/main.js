$(function(){"use strict";if(jQuery().tooltip){$('[data-toggle="tooltip"]').tooltip();}
if(jQuery().select2){$('select.select2').select2();}
$('[data-toggle="popover"]').popover()
$(document).on('click','.open_login_modal',function(e){e.preventDefault();$('#loginFormModal').modal('show');});$(document).on('click','.section-edit-btn',function(e){e.preventDefault();$(this).closest('.dashboard-course-section').find('.section-edit-form-wrap').toggle();});$(document).on('click','.section-collapse-btn',function(e){e.preventDefault();$(this).closest('.dashboard-course-section').find('.dashboard-section-body').toggle();});$(document).on('submit','form.section-edit-form',function(e){e.preventDefault();var $form=$(this);var $form_data=$form.serialize();var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$form.closest('.section-edit-form-wrap').hide();}});});$(document).on('onchange keyup paste','.section-edit-form-wrap [name="section_name"]',function(e){var text=$(this).val();$(this).closest('.dashboard-course-section').find('.dashboard-section-header .dashboard-section-name strong').text(text);});$(document).on('click','button.section-delete-btn',function(e){e.preventDefault();if(!confirm("You are about to remove section and it's content. Are you sure you want to continue? ")){return;}
var $that=$(this);var section_id=$that.attr('data-section-id');$.ajax({url:pageData.routes.delete_section,type:'POST',data:{section_id:section_id,_token:pageData.csrf_token},beforeSend:function(){$that.closest('.dashboard-course-section').remove();}});});$(document).on('click','.add-item-lecture',function(e){e.preventDefault();var $that=$(this);$('.btn-cancel-form').trigger('click');var $formHtml=$('#section-lecture-form-html').html();$that.closest('.dashboard-course-section').find('.section-item-form-wrap').html($formHtml);$('textarea.ajaxCkeditor').ckeditor();});$(document).on('click','.create-new-quiz',function(e){e.preventDefault();var $that=$(this);$('.btn-cancel-form').trigger('click');var $formHtml=$('#section-quiz-form-html').html();$that.closest('.dashboard-course-section').find('.section-item-form-wrap').html($formHtml);$('textarea.ajaxCkeditor').ckeditor();});$(document).on('click','.btn-cancel-form',function(e){e.preventDefault();var $previous_cke=$('#cke_description');if($previous_cke.length)$previous_cke.remove();if(CKEDITOR.instances.description)CKEDITOR.instances.description.destroy();$(this).closest('.section-item-form-wrap').html('');$(this).closest('.section-item-edit-form-wrap').html('');});$(document).on('keyup',function(e){if(e.keyCode===27){$('.btn-cancel-form').trigger('click');$('.modal-backdrop').remove();$(document.body).removeClass("modal-open");}});$(document).on('submit','form.curriculum-lecture-form',function(e){e.preventDefault();var $form=$(this);var $btn=$form.find('.btn-add-lecture');var $section=$form.closest('.dashboard-course-section');var section_id=parseInt($section.attr('id').match(/\d+/)[0],10);var $form_data=$form.serialize()+'&section_id='+section_id;var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$('.lecture-request-response').html('');$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('.btn-cancel-form').trigger('click');load_contents_open_item_form(section_id,response.item_id);}else{$form.find('.lecture-request-response').html(response.error_msg);}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});function load_contents(section_id){$.post(pageData.routes.load_contents,{section_id:section_id,_token:pageData.csrf_token},function(response){$('#dashboard-section-'+section_id).find('.dashboard-section-body').html(response.html);});}
function load_contents_open_item_form(section_id,item_id){$.post(pageData.routes.load_contents,{section_id:section_id,_token:pageData.csrf_token},function(response){$('#dashboard-section-'+section_id).find('.dashboard-section-body').html(response.html);$('#section-item-'+item_id).find('button.section-item-edit-btn').trigger('click');});}
$(document).on('click','.section-item-edit-btn',function(e){e.preventDefault();var $btn=$(this);var $edit_form_wrap=$btn.closest('.edit-curriculum-item').find('.section-item-edit-form-wrap');var item_id=parseInt($btn.attr('data-item-id'));$.ajax({url:pageData.routes.edit_item_form,type:'POST',data:{item_id:item_id,_token:pageData.csrf_token},beforeSend:function(){$('.btn-cancel-form').trigger('click');$btn.addClass('loader').attr('disabled','disabled');$('.section-item-edit-form-wrap').html('');},success:function(response){if(response.success){$edit_form_wrap.html(response.form_html);if($edit_form_wrap.find('.ajaxCkeditor').length){$('textarea.ajaxCkeditor').ckeditor();}}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});$(document).on('click','.section-item-delete-btn',function(e){e.preventDefault();if(!confirm("You are about to remove a curriculum item. Are you sure you want to continue? ")){return;}
var $btn=$(this);var item_id=parseInt($btn.attr('data-item-id'));$.ajax({url:pageData.routes.delete_item,type:'POST',data:{item_id:item_id,_token:pageData.csrf_token},beforeSend:function(){$btn.closest('.edit-curriculum-item').remove();}});});$(document).on('onchange keyup paste','.section-item-edit-form-wrap [name="title"]',function(e){var text=$(this).val();$(this).closest('.edit-curriculum-item').find('.section-item-title-text').text(text);});$(document).on('submit','form.curriculum-edit-lecture-form',function(e){e.preventDefault();var $form=$(this);var $btn=$form.find('.btn-edit-lecture');var $section=$form.closest('.dashboard-course-section');var section_id=parseInt($section.attr('id').match(/\d+/)[0],10);var $form_data=$form.serialize()+'&section_id='+section_id;var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('.btn-cancel-form').trigger('click');}else{$form.find('.lecture-request-response').html(response.error_msg);}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});var searchDelayTimer;const globalSearchLoader=document.querySelector('#global-search-container');if(globalSearchLoader){globalSearchLoader.style.visibility='hidden';}
$('.search-suggestion').bind('typeahead:select',function(ev,suggestion){if(globalSearchLoader){globalSearchLoader.style.visibility='visible';}
clearTimeout(searchDelayTimer);var searchValue=suggestion;searchDelayTimer=setTimeout(function(){if(searchValue&&searchValue.length>=3){var url=new URL(window.location.href);url.searchParams.set("q",searchValue);$.ajax({url:`${url.href}`,type:'POST',data:{q:searchValue,_token:pageData.csrf_token},beforeSend:function(){if(globalSearchLoader){globalSearchLoader.style.visibility='visible';}},success:function(response){if(response.success){$('#main-container').empty().html(response.content);history.replaceState({},null,url.href);}},complete:function(){if(globalSearchLoader){globalSearchLoader.style.visibility='hidden';}}});}else{}},1000);});$(document).on('click','.curriculum-item-edit-tab a',function(e){e.preventDefault();var $that=$(this);var id=$that.attr('data-tab');$('.list-tab-item').removeClass('active');$that.addClass('active');$('.section-item-tab-wrap').hide();$(id).show();});$(document).on('change','.lecture_video_source',function(e){var $that=$(this);var selector=$(this).val();if(selector&&selector!=='-1'){$('.video-source-input-wrap').show();}else{$('.video-source-input-wrap').hide();}
$that.closest('.lecture-video-upload-wrap').find('.video-source-item').hide();$that.closest('.lecture-video-upload-wrap').find('.video_source_wrap_'+selector).show();});function dashboard_sections_items_sort(){if(jQuery().sortable){$("#dashboard-curriculum-sections-wrap").sortable({handle:".section-move-handler",start:function(e,ui){ui.placeholder.css('visibility','visible');},stop:function(e,ui){sorting_contents();},});$(".dashboard-section-body").sortable({connectWith:".dashboard-section-body",handle:".section-item-top",items:"div.edit-curriculum-item",start:function(e,ui){ui.placeholder.css('visibility','visible');},stop:function(e,ui){sorting_contents();},});}}
dashboard_sections_items_sort();function sorting_contents(){var sections={};$('.dashboard-course-section').each(function(index,item){var $section=$(this);var topics_id=parseInt($section.attr('id').match(/\d+/)[0],10);var items={};$section.find('.edit-curriculum-item').each(function(lessonIndex,lessonItem){items[lessonIndex]=parseInt($(this).attr('id').match(/\d+/)[0],10);});sections[index]={'section_id':topics_id,'item_ids':items};});$.post(pageData.routes.curriculum_sort,{sections:sections,_token:pageData.csrf_token});}
$(document).on('click','#add_more_attachment_btn',function(e){e.preventDefault();$('.attachment-upload-forms-wrap').append($('#upload-attachments-hidden-form').html());});$(document).on('click','.btn-remove-lecture-attachment-form',function(e){e.preventDefault();$(this).closest('.single-attachment-form').remove();});$(document).on('click','.section-item-attachment-delete-btn',function(e){e.preventDefault();var attachment_id=$(this).attr('data-attachment-id');$(this).closest('.dashboard-item-attachment').remove();$.post(pageData.routes.delete_attachment_item,{attachment_id:attachment_id,_token:pageData.csrf_token});});$(document).on('click','.new-assignment-btn',function(e){e.preventDefault();var $that=$(this);$('.btn-cancel-form').trigger('click');var $formHtml=$('#new-assignment-form-html').html();$that.closest('.dashboard-course-section').find('.section-item-form-wrap').html($formHtml);$('textarea.ajaxCkeditor').ckeditor();});$(document).on('submit','form.new-assignment-form',function(e){e.preventDefault();var $form=$(this);var $btn=$form.find('.btn-add-assignment');var $section=$form.closest('.dashboard-course-section');var section_id=parseInt($section.attr('id').match(/\d+/)[0],10);var $form_data=$form.serialize()+'&section_id='+section_id;var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$('.assignment-request-response').html('');$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('.btn-cancel-form').trigger('click');load_contents(section_id);}else{$form.find('.assignment-request-response').html(response.error_msg);}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});$(document).on('submit','form.update-assignment-form',function(e){e.preventDefault();var $form=$(this);var $btn=$form.find('.btn-save-assignment');var $form_data=$form.serialize();var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('.btn-cancel-form').trigger('click');}else{$form.find('.assignment-request-response').html(response.error_msg);}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});$(document).on('change','.course-price-type-wrap input[name="price_plan"]',function(e){var $that=$(this);$('.course-pricing-wrap').hide();$('.price_plan_'+$that.val()).show();});$(document).on('change','#feedback_status',function(e){$('#feedback-status-update').submit();});$(document).on('change','#course_category',function(e){var $that=$(this);var $topic=$('#course_topic');$.ajax({url:pageData.routes.get_topic_options,type:'POST',data:{category_id:$that.val(),_token:pageData.csrf_token},beforeSend:function(){$topic.closest('.form-group').find('.show-loader').addClass('loader');},success:function(response){if(response.success){$topic.html(response.options_html);if(jQuery().select2){$topic.select2("destroy").select2();}}},complete:function(){$topic.closest('.form-group').find('.show-loader').removeClass('loader');}});});$(document).on('change','#resume_category',function(e){var $that=$(this);var $topic=$('#resume_topic');$.ajax({url:pageData.routes.get_topic_options,type:'POST',data:{category_id:$that.val(),_token:pageData.csrf_token},beforeSend:function(){$topic.closest('.form-group').find('.show-loader').addClass('loader');},success:function(response){if(response.success){$topic.html(response.options_html);if(jQuery().select2){$topic.select2("destroy").select2();}}},complete:function(){$topic.closest('.form-group').find('.show-loader').removeClass('loader');}});});$('#add-comment-btn').on('click',function(e){var btn=$(this);var resume_id=btn.attr('data-resume-id');var comment=document.getElementById('add-comment-input');var commentString=``;if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return;}
$.ajax({url:pageData.routes.resume_comments,type:'POST',data:{resume_id:resume_id,message:comment.value,module_type:'App\\Resume',module_id:resume_id,_token:pageData.csrf_token},beforeSend:function(){btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('#comment-list').html(response.display_data);}else if(!response.success){$('#comment_error').html("<small>"+response.message+"</small>");}},error:function(jqXHR,textStatus,errorThrown){btn.removeClass('loader').removeAttr('disabled');},complete:function(){btn.removeClass('loader').removeAttr('disabled');comment.value='';}});});$(document).on("click","#resume-preview-btn",function(){if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return false;}
var modal=document.querySelector("#resume-preview-img-modal");var onPreview=document.querySelector("#resume-preview-btn");var resumeImg=document.querySelector("#original-resume-img");var modalImg=document.querySelector("#resume-modal-preview-box");document.body.style.position='fixed';modal.style.display="block";modalImg.src=resumeImg.src;var span=document.getElementsByClassName("resume-preview-close-btn")[0];span.onclick=function(){modal.style.display="none";document.body.style.position='';}})
$(document).on('submit','#instructor-search-form',function(e){e.preventDefault();var $form=$(this);var input=$form.serialize();var url=$form.attr('action');var search_term=$form.find('[name="q"]').val();var term_length=search_term.trim().length;if(term_length<4){$('#form-response-msg').html('<p class="text-info"> <i class="la la-info-circle"></i> Enter '+(4-term_length)+' more characters to start search</p>');return false;}else{$('#form-response-msg').html('');}
$.ajax({url:url,type:'POST',data:input,beforeSend:function(){$('#instructor-search-results').html('');$form.find('button').addClass('loader');},success:function(response){if(response.success){$('#instructor-search-results').html(response.html);}},complete:function(){$form.find('button').removeClass('loader');}});});$(document).on('change keyup','#instructor-search-form [name="q"]',function(e){$('#instructor-search-results').html('');});$(document).on('click','.instructor-remove-btn, .confirm-btn',function(e){if(!confirm('Are you sure?')){return false;}});$(document).on('change','.option-type-selection-wrapper input[name="question_type"]',function(e){e.preventDefault();var $that=$(this);if($that.val()==='radio'||$that.val()==='checkbox'){$('#questionTypeFormModal').html($('#quizQuestionWrapType_radio').html());}else if($that.val()==='text'||$that.val()==='textarea'){$('#questionTypeFormModal').html($('#quizQuestionWrapType_text').html());}
$('.lecture_reference').select2({placeholder:'Lecture Reference',allowClear:true,dropdownParent:"#quizQuestionTypeMoal"});});$(document).on('submit','form.curriculum-quiz-form',function(e){e.preventDefault();var $form=$(this);var $btn=$form.find('.btn-add-quiz');var $section=$form.closest('.dashboard-course-section');var section_id=parseInt($section.attr('id').match(/\d+/)[0],10);var $form_data=$form.serialize()+'&section_id='+section_id;var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$('.quiz-request-response').html('');$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('.btn-cancel-form').trigger('click');load_contents_open_item_form(section_id,response.item_id);}else{$form.find('.quiz-request-response').html(response.error_msg);}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});$(document).on('submit','form.curriculum-edit-quiz-form',function(e){e.preventDefault();var $form=$(this);var $btn=$form.find('.btn-edit-quiz');var $section=$form.closest('.dashboard-course-section');var section_id=parseInt($section.attr('id').match(/\d+/)[0],10);var $form_data=$form.serialize()+'&section_id='+section_id;var url=$form.attr('action');$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){$('.btn-cancel-form').trigger('click');}else{$form.find('.quiz-request-response').html(response.error_msg);}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});$(document).on('click','#quiz-add-question-btn',function(e){e.preventDefault();$('input[name="question_type"]').prop('checked',false)
$('#questionTypeFormModal').html("");$('#quizQuestionTypeMoal').modal('show').css('overflow-y','auto');});$(document).on('click','#faq-add-question-btn',function(e){e.preventDefault();$("#faq_question_form").attr('action',pageData.routes.faq_store_question);$('#faqQuestion').val('');$('#faqAnswer').val('');$('#faqQuestionId').attr('value',null);$('#faqQuestionMoal').modal('show').css('overflow-y','auto');});$('body').on('hidden.bs.modal',function(){if($('.modal.in').length>0){$('body').addClass('modal-open');}});$(document).on('keyup change','.question-opt textarea',function(e){e.preventDefault();var $that=$(this);$that.closest('.question-opt').removeClass('newly');if(!$that.closest('.quiz-question-form-wrap').find('.newly').length){var $optHtml=$that.closest('.question-opt')[0].outerHTML;var index=$that.closest('.quiz-question-form-wrap').find('.question-opt').length;$that.closest('.question-opt').find('input, textarea').each(function(){var $input=$(this);$input.attr('name',$input.attr('name').replace('{index}',index));});$that.closest('.question-options-wrap').append($($optHtml).addClass('newly'));}});$(document).on('change','.question-opt input[type="hidden"]',function(e){e.preventDefault();var $that=$(this);$that.closest('.question-opt').removeClass('newly');if(!$that.closest('.quiz-question-form-wrap').find('.newly').length){var $optHtml=$that.closest('.question-opt')[0].outerHTML;var index=$that.closest('.quiz-question-form-wrap').find('.question-opt').length;$that.closest('.question-opt').find('input').each(function(){var $input=$(this);$input.attr('name',$input.attr('name').replace('{index}',index));});$that.closest('.question-options-wrap').append($($optHtml).addClass('newly'));$('.question-opt.newly input[type="hidden"]').val("");$('.question-opt.newly .img-thumbnail').attr('src',window.location.origin+'/uploads/placeholder-image.png')}});$(document).on('click','.is_correct_input',function(e){if($(this).closest('form').find('#input_option_type_radio').prop('checked')){$('.is_correct_input').not(this).prop('checked',false);}});$(document).on('click','.question-opt-trash',function(e){e.preventDefault();var $that=$(this);var option_id=parseInt($that.attr('data-option-id'));if($that.closest('.quiz-question-form-wrap').find('.question-opt').length>1){$that.closest('.question-opt').remove();}
if(option_id){$.post(pageData.routes.option_delete,{option_id:option_id,_token:pageData.csrf_token});}});$(document).on('submit','#create-question-form, #edit-question-form',function(e){e.preventDefault();var $form=$(this);var input=$form.serialize();var url=$form.attr('action');$.ajax({url:url,type:'POST',data:input,beforeSend:function(){$form.find('button[type="submit"]').addClass('loader');},success:function(response){if(response.success){load_quiz_questions(response.quiz_id);$('#quizQuestionTypeMoal, #editQuestionTypeModal').modal('hide')}else{$form.find('#questionRequestResponse').html(response.error_msg);}},complete:function(){$form.find('button[type="submit"]').removeClass('loader');}});});function load_quiz_questions(quiz_id){$.post(pageData.routes.load_questions,{quiz_id:quiz_id,_token:pageData.csrf_token},function(response){$('#quiz-questions-wrap').html(response.html);});}
$(document).on('click','.question-edit',function(e){e.preventDefault();var $that=$(this);var question_id=$that.attr('data-question-id');$.ajax({url:pageData.routes.edit_question_form,type:'POST',data:{question_id:question_id,_token:pageData.csrf_token},beforeSend:function(){$('#editQuestionTypeModal').remove();$that.find('.la').addClass('loader');},success:function(response){if(response.success){$('body').append(response.html);sortable_options();$('#editQuestionTypeModal').modal('show');$('.edit_lecture_reference').select2({placeholder:'Lecture Reference',allowClear:true,dropdownParent:"#editQuestionTypeModal"});}},complete:function(){$that.find('.la').removeClass('loader');}});});$(document).on('click','.question-trash',function(e){e.preventDefault();if(!confirm('Are you sure?')){return false;}
var $that=$(this);var question_id=parseInt($that.attr('data-question-id'));$that.closest('.quiz-question-item').remove();$.post(pageData.routes.delete_question,{question_id:question_id,_token:pageData.csrf_token});});$(document).on('click','.faq-question-edit',function(e){var $that=$(this);var question_id=$that.attr('data-question-id');$.ajax({url:pageData.routes.faq_find_question,type:'GET',data:{question_id:question_id},success:function(response){$("#faq_question_form").attr('action',pageData.routes.faq_update_question);$('#faqQuestion').val(response.question);$('#faqAnswer').val(response.answer);$('#faqQuestionId').attr('value',response.id);$('#faqQuestionMoal').modal('show').css('overflow-y','auto');}});});$(document).on('click','#quiz-questions-tab-item',function(e){sortable_questions();});function sortable_questions(){if(jQuery().sortable){$("#quiz-questions-wrap").sortable({handle:".question-sort",items:"div.quiz-question-item",start:function(e,ui){ui.placeholder.css('visibility','visible');},stop:function(e,ui){sorting_questions();},});}}
function sorting_questions(){var questions={};$('#quiz-questions-wrap .quiz-question-item').each(function(index,item){index++;questions[index]=parseInt($(this).attr('id').match(/\d+/)[0],10);});$.post(pageData.routes.sort_questions,{questions:questions,_token:pageData.csrf_token});}
function sortable_options(){if(jQuery().sortable){$(".question-options-wrap").sortable({handle:".question-option-sort",items:"div.question-opt",start:function(e,ui){ui.placeholder.css('visibility','visible');},stop:function(e,ui){},});}}
$(document).on('click','.withdraw-preference-method-name',function(e){$('.withdraw-method-form').hide();$('#'+$(this).attr('data-target')).show();});$(document).on('click','.browse-categories-nav-link',function(e){e.preventDefault();var $ul=$('.categories-ul-first');if($ul.hasClass('d-block')){$ul.removeClass('d-block').addClass('d-none');}else{$ul.removeClass('d-none').addClass('d-block');}});$(document).on('click','#miniCartDropDown',function(e){e.preventDefault();var $ul=$('.mini-cart-body-wrap');if($ul.hasClass('d-block')){$ul.removeClass('d-block').addClass('d-none');}else{$ul.removeClass('d-none').addClass('d-block');}});$(document).on('click','.remove-checkout-item-btn',function(e){e.preventDefault();var $btn=$(this);var cart_id=$btn.attr('data-cart-id');$.post(pageData.routes.remove_cart,{cart_id:cart_id,_token:pageData.csrf_token},function(response){if(response.success){window.location.reload();}});});$(document).on('click','a.nav-icon-list',function(e){e.preventDefault();$('.lecture-sidebar').toggle();});$(".progress.circle").each(function(){var value=$(this).attr('data-value');var left=$(this).find('.progress-left .progress-bar');var right=$(this).find('.progress-right .progress-bar');if(value>0){if(value<=50){right.css('transform','rotate('+percentageToDegrees(value)+'deg)')}else{right.css('transform','rotate(180deg)')
left.css('transform','rotate('+percentageToDegrees(value-50)+'deg)')}}});function percentageToDegrees(percentage){return percentage/100*360}
$(document).on('keyup change','[data-maxlength]',function(e){e.preventDefault();var $that=$(this);var length=parseInt($that.attr('data-maxlength'));var value=$that.val();var remaining_length=length-value.length;if(remaining_length<1){remaining_length=0;}
$that.closest('.form-group').find('.input-group-text').html(remaining_length);if(value.length>length){$that.val(value.substr(0,length));}});function collapse_if_much_height(){var $contentExpandInner=$('.content-expand-inner');if($contentExpandInner.length){$contentExpandInner.each(function(index,item){var $that=$(this);var height=$that.height();if(height>270){$(this).closest('.content-expand-wrap').append('<span class="expand-more-btn-wrap"><button type="button" class="expand-more-btn btn-sm btn btn-link"> + See More</button></span>');}});}
$(document).on('click','.expand-more-btn',function(e){e.preventDefault();var $that=$(this);$that.closest('.content-expand-wrap').css("max-height","none");$that.closest('.expand-more-btn-wrap').remove();});}
collapse_if_much_height();$(document).on('click','.course-section-header',function(e){var $that=$(this);var display=$that.next('.course-section-body').css("display").trim();if(display==='none'){$that.find('i.la').removeClass('la-plus').addClass('la-minus');}else{$that.find('i.la').removeClass('la-minus').addClass('la-plus');}
$that.next('.course-section-body').slideToggle();});$(document).on('click','#expand-collapse-all-sections a',function(e){var $that=$(this);$that.hide();var action=$that.attr('data-action');if(action==='expand'){$('a[data-action="collapse"]').show();$('.course-section-name i.la').removeClass('la-plus').addClass('la-minus');$('.course-section .course-section-body').slideDown();}else{$('a[data-action="expand"]').show();$('.course-section-name i.la').removeClass('la-minus').addClass('la-plus');$('.course-section .course-section-body').slideUp();}});$(document).on('click','.buy-now-btn',function(e){if(!pageData.is_logged_in){e.preventDefault();if($('#loginFormModal').length){$('#loginFormModal').modal('show');}else{$('#loginFormModalShouldOpen').modal('show');}
return false;}
return true;});$(document).on('click','.add-to-cart-btn',function(e){var $btn=$(this);var course_id=$btn.attr('data-course-id');var reference_id=$btn.attr('data-reference-id');if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return;}
$.ajax({url:pageData.routes.add_to_cart,type:'POST',data:{course_id:course_id,reference_id:reference_id,_token:pageData.csrf_token},beforeSend:function(){$btn.addClass('loader').attr('disabled','disabled');$btn.html("<i class='la la-check-circle'></i> Adding...");},success:function(response){if(response.success){$('.dropdown.mini-cart-item').html(response.cart_html);$btn.html("<i class='la la-check-circle'></i> In Cart");}else{$btn.removeClass('loader').removeAttr('disabled');}},error:function(jqXHR,textStatus,errorThrown){$btn.removeClass('loader').removeAttr('disabled');},complete:function(){$btn.removeClass('loader');}});});if($('#loginFormModalShouldOpen').length){$('#loginFormModalShouldOpen').modal('show');}
$('.checkout-payment-methods-wrap .tab-pane:first-child').addClass('show active');$(document).on('click','.review-write-star-wrap i',function(){$(this).closest('.review-write-star-wrap').find('i').removeClass('la-star').addClass('la-star-o');var ratingValue=$(this).attr('data-rating-value');for(var i=1;i<=ratingValue;i++){$(this).closest('.review-write-star-wrap').find('i[data-rating-value="'+i+'"]').removeClass('la-star-o').addClass('la-star');}
$(this).closest('.review-write-star-wrap').find('input[name="rating_value"]').val(ratingValue);if($(this).closest('.review-write-star-wrap').find('input[name="rating_value"]').length>0){$(this).closest('.review-write-star-wrap').find('input[name="rating_value"]')[0].setCustomValidity('');}});$(document).on('click','.course-card-add-wish',function(){if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return false;}
var $btn=$(this);var course_id=$btn.attr('data-course-id');$.ajax({url:pageData.routes.update_wish_list,type:'POST',data:{course_id:course_id,_token:pageData.csrf_token},beforeSend:function(){$btn.find('i').removeClass('la-heart-o la-heart');$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){if(response.state==='added'){$btn.find('i').addClass('la-heart');}else{$btn.find('i').addClass('la-heart-o');}}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');;}});});$(document).on('change','.course-search-item',function(){$('#course-filter-form').submit();});$(document).on('change','.resume-search-item',function(){$('#resume-filter-form').submit();});$(document).on('change','#global-search-filter-form',function(){$(this).submit();});$(document).on('click','.download-resume-btn',function(e){if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return false;}
var btn=$(this);var resume_id=btn.attr('data-resume-id');$.ajax({url:pageData.routes.update_download_count,type:'POST',data:{resume_id:resume_id,increment:true,_token:pageData.csrf_token}})});$(document).on('click','#btn-start-quiz',function(){var $btn=$(this);var quiz_id=$btn.attr('data-quiz-id');$.ajax({url:pageData.routes.start_quiz,type:'POST',data:{quiz_id:quiz_id,_token:pageData.csrf_token},beforeSend:function(){$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){location.href=response.quiz_url}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');;}});});$(document).on('submit','form.quiz-question-submit',function(e){e.preventDefault();var $form=$(this);var url=$form.attr('action');var $form_data=$form.serialize();var $btn=$form.find('button[type="submit"]');var qvalidation=question_validation();if(!qvalidation){$('#questionRequiredAlertModal').modal('show');return qvalidation;}
$.ajax({url:url,type:'POST',data:$form_data,beforeSend:function(){$btn.addClass('loader').attr('disabled','disabled');},success:function(response){if(response.success){location.href=response.quiz_url}},complete:function(){$btn.removeClass('loader').removeAttr('disabled');}});});function question_validation(){var validated=true;var $raWrap=$('.question-single-wrap');var $inputs=$raWrap.find('input');if($inputs.length){var $type=$inputs.attr('type');if($type==='radio'){if($raWrap.find('input[type="radio"]:checked').length==0){validated=false;}}else if($type==='checkbox'){if($raWrap.find('input[type="checkbox"]:checked').length==0){validated=false;}}else if($type==='text'){if(!$inputs.val().trim().length){validated=false;}}}
if($raWrap.find('textarea').length){if($raWrap.find('textarea').val().trim().length<1){validated=false;}}
return validated;}
if(!getCookie('cookie_notice')){if(pageData.cookie_html&&pageData.cookie_html.length>0){$('body').append(pageData.cookie_html);}}
$('.cookie-dismiss').click(function(e){e.preventDefault();setCookie('cookie_notice','exists',30);$(this).closest('.cookie_notice_popup').remove();});function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return "";}
try{$('[data-toggle="tooltip"]').tooltip();}catch(e){console.error(e);}
$('.profile-photo').on('error',function(){console.log(this);this.src='/uploads/placeholder-image.png';})
initializeReferenceLinkCopy();});function initializeReferenceLinkCopy(){let copyButton=document.getElementById("copyReferenceLinkButton");if(copyButton){copyButton.addEventListener('click',()=>{let inputText=document.getElementById("referenceLink");inputText.select();inputText.setSelectionRange(0,99999);inputText.blur()
document.execCommand("copy");})}}
function initializeEmojiReaction(post_id){Array.from(document.querySelectorAll(".st-btn")).forEach(function(button){button.addEventListener("click",function(){if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return;}
const reactionValue=button.getAttribute("data-value");$.ajax({url:pageData.routes.add_reaction,type:'POST',data:{post_id:post_id,reaction:`${reactionValue}`,_token:pageData.csrf_token},success:function(response){const{reaction_count:{claps,insight,smiley_heart_eyes,thumbs_down,thumbs_up},user_reaction}=response;setUserReaction(user_reaction);document.querySelector('#thumbs_down_reaction_count').innerHTML=thumbs_down;document.querySelector('#thumbs_up_reaction_count').innerHTML=thumbs_up;document.querySelector('#claps_reaction_count').innerHTML=claps;document.querySelector('#insight_reaction_count').innerHTML=insight;document.querySelector('#smiley_heart_eyes_reaction_count').innerHTML=smiley_heart_eyes;}});});});}
function initializeBlogEmojiReaction(blog_id){Array.from(document.querySelectorAll(".st-btn")).forEach(function(button){button.addEventListener("click",function(){if(!pageData.is_logged_in){$('#loginFormModal').modal('show');return;}
const reactionValue=button.getAttribute("data-value");$.ajax({url:pageData.routes.add_blog_reaction,type:'POST',data:{blog_id:blog_id,reaction:`${reactionValue}`,_token:pageData.csrf_token},success:function(response){const{reaction_count:{claps,insight,smiley_heart_eyes,thumbs_down,thumbs_up},user_reaction}=response;setUserReaction(user_reaction);document.querySelector('#thumbs_down_reaction_count').innerHTML=thumbs_down;document.querySelector('#thumbs_up_reaction_count').innerHTML=thumbs_up;document.querySelector('#claps_reaction_count').innerHTML=claps;document.querySelector('#insight_reaction_count').innerHTML=insight;document.querySelector('#smiley_heart_eyes_reaction_count').innerHTML=smiley_heart_eyes;}});});});}
function setUserReaction(user_reaction){Array.from(document.querySelectorAll(".st-btn")).forEach(function(button){const reactionValue=button.getAttribute("data-value");if(user_reaction==reactionValue){document.querySelector("#rating_value").value=reactionValue;const emoji_reaction=document.querySelector("#emoji_reaction");emoji_reaction.classList.add("st-reacted");button.classList.add("st-selected");}
else{if(button.classList.contains("st-selected")){button.classList.remove("st-selected");}}});}
jQuery(document).ready(function(){try{$("a").each(function(){var target=$(this);if(target[0].href.length>4&&target[0].href.startsWith('http')&&!target[0].href.includes(window.location.origin)){target.attr('target','_blank');target.attr('rel','noreferer');}});}catch(e){}});function initializeCourseSearch(){const categorySearch=document.querySelector("#categorySearch");if(categorySearch){categorySearch.addEventListener('keyup',()=>{const filter=categorySearch.value.toUpperCase();const allCategories=document.querySelectorAll('.category-search-item')
allCategories.forEach((element)=>{const elementSpan=element.querySelector('.custom-control-label')
let txtValue=elementSpan.textContent||elementSpan.innerText;if(txtValue.toUpperCase().indexOf(filter)>-1){element.style.display="";}else{element.style.display="none";}});});}}
function initializeJobRoleSearch(){const jobRoleSearchInput=document.querySelector("#jobRoleSearch");if(jobRoleSearchInput){jobRoleSearchInput.addEventListener("keyup",()=>{const filter=jobRoleSearchInput.value.toUpperCase();const allRoles=document.querySelectorAll('.job-role-item');allRoles.forEach((element)=>{const elementSpan=element.querySelector('.custom-control-label')
let txtValue=elementSpan.textContent||elementSpan.innerText;if(txtValue.toUpperCase().indexOf(filter)>-1){element.style.display="";}else{element.style.display="none";}});});}}
$(function(){$("input[type='password'][data-eye]").each(function(i){var $this=$(this),id='eye-password-'+i,el=$('#'+id);$this.wrap($("<div/>",{style:'position:relative',id:id}));$this.css({paddingRight:60});$this.after($("<div/>",{html:'<i class="las la-eye" style="font-size:1.5em"></i>',class:'btn btn-link btn-sm',id:'passeye-toggle-'+i,}).css({position:'absolute',right:20,top:($this.outerHeight()/2)+6,padding:'2px 7px',fontSize:12,cursor:'pointer',}));$this.after($("<input/>",{type:'hidden',id:'passeye-'+i}));var invalid_feedback=$this.parent().parent().find('.invalid-feedback');if(invalid_feedback.length){$this.after(invalid_feedback.clone());}
$this.on("keyup paste",function(){$("#passeye-"+i).val($(this).val());});$("#passeye-toggle-"+i).on("click",function(){if($this.hasClass("show")){$this.attr('type','password');$this.removeClass("show");$(this).html('<i class="las la-eye" style="font-size:1.5em"></i>')}else{$this.attr('type','text');$this.val($("#passeye-"+i).val());$this.addClass("show");$(this).html('<i class="las la-eye-slash" style="font-size:1.5em"></i>');}});});$(".my-login-validation").submit(function(){var form=$(this);if(form[0].checkValidity()===false){event.preventDefault();event.stopPropagation();}
form.addClass('was-validated');});try{if($('#quiz-form').length){var quizParsley=$('#quiz-form').parsley();quizParsley.on('field:validated',function(e){console.log('e',e)
console.log("field:validated",$('.parsley-error').length);$('.parsley-error').each(function(index,el){$(el).parent().closest('.question-single-wrap').addClass("quiz-error p-2")});});quizParsley.on('field:success',function(e){console.log("success",$('.parsley-success').length);$('.parsley-success').each(function(index,el){console.log("$(el).parent('.question-single-wrap')",$(el).parent('.question-single-wrap'));$(el).closest('.question-single-wrap').removeClass("quiz-error")});});}}catch(e){console.log(e);}
try{document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){e.preventDefault();if(document&&this.getAttribute('href')&&String(this.getAttribute('href')).replace('#','')){document.querySelector(this.getAttribute('href')).scrollIntoView({behavior:'smooth'});}});});}catch(e){console.log(e);}
$('body').on('click','.close-swl',function(e){e.preventDefault();Swal.close();});$('body').on('click','.delete-action',function(e){e.preventDefault();e.stopPropagation();const href=$(this).attr('href');const title=$(this).attr('data-title')??deleteAlertHint;const confirm=$(this).attr('data-confirm')??deleteAlertConfirm;var html='<div class="">\n'+
'    <p class="">'+title+'</p>\n'+
'    <div class="mt-30 d-flex align-items-center justify-content-center">\n'+
'        <button type="button" id="swlDelete" data-href="'+href+'" class="btn btn-sm shadow-none btn-primary">'+confirm+'</button>\n'+
'        <button type="button" class="btn shadow-none btn-sm btn-danger ms-10 close-swl">'+deleteAlertCancel+'</button>\n'+
'    </div>\n'+
'</div>';Swal.fire({title:deleteAlertTitle,html:html,icon:'warning',showConfirmButton:false,showCancelButton:false,allowOutsideClick:()=>!Swal.isLoading(),})});$('body').on('click','#swlDelete',function(e){e.preventDefault();var $this=$(this);const href=$this.attr('data-href');$this.addClass('loadingbar primary').prop('disabled',true);$.get(href,function(result){if(result&&result.code===200){Swal.fire({title:(typeof result.title!=="undefined")?result.title:deleteAlertSuccess,text:(typeof result.text!=="undefined")?result.text:deleteAlertSuccessHint,showConfirmButton:false,icon:'success',});if(typeof result.dont_reload==="undefined"){setTimeout(()=>{if(typeof result.redirect_to!=="undefined"&&result.redirect_to!==undefined&&result.redirect_to!==null&&result.redirect_to!==''){window.location.href=result.redirect_to;}else{window.location.reload();}},1000);}}else{Swal.fire({title:deleteAlertFail,text:deleteAlertFailHint,icon:'error',})}}).error(err=>{Swal.fire({title:deleteAlertFail,text:deleteAlertFailHint,icon:'error',})}).always(()=>{$this.removeClass('loadingbar primary').prop('disabled',false);});})
$(document).on('change','.job-search-item',function(){$('#job-filter-form').submit();});});$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});